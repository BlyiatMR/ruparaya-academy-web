/* UItoTop jQuery Plugin 1.2 | Matt Varone | http://www.mattvarone.com/web-design/uitotop-jquery-plugin */
(function($) {
    $.fn.UItoTop = function(options) {
        var defaults = {
                text: 'To Top',
                min: 100,
                inDelay: 100,
                outDelay: 100,
                containerID: 'toTop',
                containerHoverID: 'toTopHover',
                scrollSpeed: 600,
                easingType: 'linear'
            },
            settings = $.extend({}, defaults, options),
            containerIDHash = '#' + settings.containerID,
            containerHoverIDHash = '#' + settings.containerHoverID;

        $('body').append('<a href="#" id="' + settings.containerID + '">' + settings.text + '</a>');

        $(containerIDHash).hide().on('click.UItoTop', function() {
            $('html, body').animate({
                scrollTop: 0
            }, settings.scrollSpeed, settings.easingType);
            $('#' + settings.containerHoverID, this).stop().animate({
                'opacity': 0
            }, settings.inDelay, settings.easingType);
            return false;
        }).prepend('<span id="' + settings.containerHoverID + '"></span>').hover(function() {
            $(containerHoverIDHash, this).stop().animate({
                'opacity': 1
            }, 100, 'linear');
        }, function() {
            $(containerHoverIDHash, this).stop().animate({
                'opacity': 0
            }, 100, 'linear');
        });

        $(window).scroll(function() {
            var scrollDistance = $(window).scrollTop();
            if (typeof document.body.style.maxHeight === "undefined") {
                $(containerIDHash).css({
                    'position': 'absolute',
                    'top': scrollDistance + $(window).height() - 50
                });
            }
            if (scrollDistance > settings.min) {
                $(containerIDHash).fadeIn(settings.inDelay);
            } else {
                $(containerIDHash).fadeOut(settings.outDelay);
            }
        });
    };
})(jQuery);
